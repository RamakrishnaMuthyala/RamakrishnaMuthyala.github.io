<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href='../unpkg.com/boxicons%402.1.4/css/boxicons.min.css' rel='stylesheet'>
  <link rel="stylesheet" href="index.css">
  <title>Ramakrishna Portfolio</title>

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-F27XB2JWE8"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-F27XB2JWE8');
  </script>

  <!-- Resume View/Download Tracking -->
  <script>
    document.getElementById('view-resume')?.addEventListener('click', function () {
      gtag('event', 'resume_view', {
        event_category: 'engagement',
        event_label: 'View Resume'
      });
    });
  
    document.getElementById('download-resume')?.addEventListener('click', function () {
      gtag('event', 'resume_download', {
        event_category: 'engagement',
        event_label: 'Download Resume'
      });
    });
  </script>
</head>

<body>
  <!-- Header -->
  <header class="container">
    <div class="page-header">
      <div class="logo">
        <a href="index.html"><span class="logo-text">R</span>M</a>
      </div>
      <input type="checkbox" id="click">
      <label for="click" class="mainicon">
        <div class="menu"><i class='bx bx-menu'></i></div>
      </label>
      <ul>
        <li><a href="index.html" style="--navAni:1">Home</a></li>
        <li><a href="about.html" class="active" style="--navAni:2">About</a></li>
        <li><a href="skills.html" style="--navAni:3">Skills</a></li>
        <li><a href="professional-journey.html" style="--navAni:4">Professional Journey</a></li>
        <li><a href="resume.html">Resume</a></li>
      </ul>
      <label class="mode" title="Dark Mode">
        <input type="checkbox" id="darkModeToggle">
        <i class='bx bxs-moon'></i>
      </label>
    </div>
  </header>

  <!-- About Section -->
  <section class="container">
    <div class="description">
      <p class="para">
        A standout SDET isn't just great at coding or automating tests. They're a savvy blend of code mastery and
        testing expertise... <!-- shortened for readability -->
      </p>
    </div>

    <h2>Here is What People Say about me</h2>
    <div class="content-grid">
      <!-- Your testimonials (unchanged) -->
    </div>
  </section>

  <!-- Dark Mode Script -->
  <script>
    const darkModeToggle = document.getElementById('darkModeToggle');
    const body = document.body;
    const isDarkMode = localStorage.getItem('darkMode') === 'enabled';
    if (isDarkMode) {
      body.classList.add('dark-mode');
      darkModeToggle.checked = true;
    }
    darkModeToggle.addEventListener('change', () => {
      if (darkModeToggle.checked) {
        body.classList.add('dark-mode');
        localStorage.setItem('darkMode', 'enabled');
      } else {
        body.classList.remove('dark-mode');
        localStorage.setItem('darkMode', 'disabled');
      }
    });
  </script>

  <!-- âœ… Visitor Tracking Script (Moved to end, logs to Google Sheet) -->
  <script>
    (async () => {
      try {
        if (sessionStorage.getItem("visitor-logged")) return;

        const ipRes = await fetch("https://ipapi.co/json");
        const ipData = await ipRes.json();

        const res = await fetch("https://script.google.com/macros/s/AKfycbwCbFfy7-E8sZH6lLxP5ZLy3z6gjgfIw7fc-QIJ7ab9t8RruSEGED41BIJArSRL1SuKxA/exec", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            ip: ipData.ip,
            city: ipData.city,
            country: ipData.country_name,
            browser: navigator.userAgent,
            referrer: document.referrer,
            page: window.location.pathname
          })
        });

        const result = await res.text();
        console.log("Visitor tracked:", result); // should be "Success"
        sessionStorage.setItem("visitor-logged", "1");
      } catch (err) {
        console.error("Visitor log failed", err);
      }
    })();
  </script>

</body>
</html>
